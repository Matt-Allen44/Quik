<!doctype html>
<html>
  <head>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

    <title>Quik | A Free, Lightweight & Open Web Chat Application</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box;}
      body { font: 13px Helvetica, Arial; width: 50%; margin:auto;}
      #messages li {font-size: 16px;}
      #messages li:nth-child(odd) {/*text-align:right;*/}

      .msg_name {font-size: 12px; font-weight:bold; margin-bottom: 0px; padding-bottom: 0px}
      .msg_text {margin-top: 0px; padding-top: 0px}
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

  </head>
  <body>
      <nav>
        <div class="nav-wrapper teal lighten-2">
          <a href="#" style="padding-left: 10px" class="brand-logo">Quik</a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a id="usrs_connected">Users connected: 0</a></li>
          </ul>
        </div>
      </nav>

      <div style="padding-top: 10px">

<a aria-label="Watch matt-allen44/quik on GitHub" data-count-aria-label="# watchers on GitHub" data-count-api="/repos/matt-allen44/quik#subscribers_count" data-count-href="/matt-allen44/quik/watchers" data-style="mega" data-icon="octicon-eye" href="https://github.com/matt-allen44/quik" class="github-button">Watch</a>
<!-- Place this tag where you want the button to render. -->
<a aria-label="Star matt-allen44/quik on GitHub" data-count-aria-label="# stargazers on GitHub" data-count-api="/repos/matt-allen44/quik#stargazers_count" data-count-href="/matt-allen44/quik/stargazers" data-style="mega" data-icon="octicon-star" href="https://github.com/matt-allen44/quik" class="github-button">Star</a>
<!-- Place this tag where you want the button to render. -->
<a aria-label="Fork matt-allen44/quik on GitHub" data-count-aria-label="# forks on GitHub" data-count-api="/repos/matt-allen44/quik#forks_count" data-count-href="/matt-allen44/quik/network" data-style="mega" data-icon="octicon-repo-forked" href="https://github.com/matt-allen44/quik/fork" class="github-button">Fork</a>
<!-- Place this tag where you want the button to render. -->
<a aria-label="Issue matt-allen44/quik on GitHub" data-count-aria-label="# issues on GitHub" data-count-api="/repos/matt-allen44/quik#open_issues_count" data-style="mega" data-icon="octicon-issue-opened" href="https://github.com/matt-allen44/quik/issues" class="github-button">Issue</a>
<!-- Place this tag where you want the button to render. -->
<a aria-label="Download matt-allen44/quik on GitHub" data-style="mega" data-icon="octicon-cloud-download" href="https://github.com/matt-allen44/quik/archive/master.zip" class="github-button">Download</a>
      </div>

    <div style="overflow: hidden; display: block;">
      <ul id="messages"></ul>
    </div>

    <div>
      <form action="" style="position: fixed; bottom: 0; width:50%">
        <input style="width:69%; " id="m" autocomplete="off" />
        <button style="width: 29%; float:right vertical-align: middle" class="btn waves-effect waves-light" type="submit" name="action">Send Message</button>
      </form>
    </div>

    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>

      var socket = io();
      usr_name = "";

      $('form').submit(function(){
        socket.emit('chat message', usr_name + ": " + $('#m').val());
        $('#m').val('');
        return false;
      });

      socket.on('chat message', function(msg){
        $('#messages').append($('<li class="msg_name">').text(msg.split(":")[0]));
        $('#messages').append($('<li class="msg_text">').text(msg.split(":")[1]));
      });

      socket.on('disconnectEvent', function(msg){
        document.getElementByID("usrs_connected").text = "Users connected: " + msg;
      });

      socket.on('connectEvent', function(msg){
        document.getElementById("usrs_connected").text = "Users connected: " + msg;
      });

      //Prompt user for name
      swal({
        title: "Welcome to Quik",
        text: "Enter  your desired username:",
        type: "input",
        showCancelButton: false,
        closeOnConfirm: false,
        confirmButtonColor: "#4db6ac",
        confirmButtonText: "Enter Quik!",
        inputPlaceholder: "username"
      }, function (inputValue) {
        if (inputValue === false) window.close();
        if (inputValue === "") {
          swal.showInputError("You need to write something!");
          return false
        }
        swal("Welcome " + inputValue + "!", "We hope you enjoy Quik!", "success");
        usr_name = inputValue;
      });
  </script>
  </body>
</html>
